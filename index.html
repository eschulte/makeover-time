<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Makeover Time</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;700&family=Pacifico&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Fredoka', sans-serif;
            background-color: #fce4ec; /* Light pink background */
        }
        .title-font {
            font-family: 'Pacifico', cursive;
        }
        /* Custom scrollbar for a more playful look */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #fde6f0;
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #f48fb1; /* Brighter pink */
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #f06292;
        }
        /* Style for the active/selected item */
        .wardrobe-item.active, .character-selector.active {
            box-shadow: 0 0 0 4px #ec4899; /* Pink-500 */
            transform: scale(1.05);
        }
        .category-tab.active {
            background-color: #ec4899; /* pink-500 */
            color: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        /* Transition for smooth character and clothing changes */
        #character-display > div {
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 max-w-7xl">
        <header class="text-center my-6">
            <h1 class="title-font text-5xl md:text-7xl text-pink-500">Makeover Time</h1>
            <p class="text-pink-700 mt-2 text-lg">Choose a character and create the perfect look!</p>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Character Display Column -->
            <div class="lg:col-span-1 flex flex-col items-center">
                <div id="character-selection" class="mb-4 flex gap-3 bg-white/70 p-2 rounded-full shadow-md">
                    <!-- Character buttons will be inserted here by JS -->
                </div>
                <div id="character-display-container" class="relative w-64 h-[450px] md:w-80 md:h-[560px] bg-white rounded-3xl shadow-2xl overflow-hidden flex items-center justify-center">
                    <div class="absolute inset-0 bg-gradient-to-br from-pink-100 to-purple-100"></div>
                     <!-- Character parts will be layered here by JS -->
                    <div id="character-display" class="relative w-full h-full"></div>
                </div>
            </div>

            <!-- Wardrobe Selection Column -->
            <div class="lg:col-span-2 bg-white/80 backdrop-blur-sm p-6 rounded-3xl shadow-lg flex flex-col">
                <!-- Category Tabs -->
                <div id="category-tabs" class="flex flex-wrap gap-2 border-b-2 border-pink-200 pb-4 mb-4">
                    <!-- Category tabs will be inserted here by JS -->
                </div>
                <!-- Item Panel -->
                <div id="item-panel" class="flex-grow custom-scrollbar overflow-y-auto pr-2">
                     <!-- Items for the selected category will be shown here -->
                </div>
            </div>
        </main>
    </div>

    <script>
        // --- DATA ---
        // Using more detailed inline SVGs for assets.
        const assets = {
            characters: {
                char1: { name: "Alex", svg: `<svg viewBox="0 0 200 350" xmlns="http://www.w3.org/2000/svg"><g fill="#f2d5b1"><ellipse cx="100" cy="35" rx="30" ry="35"/><path d="M95,70 h10 v40 h-10z"/><path d="M70,110 Q100,130 130,110 L140,200 H60z"/><path d="M70,200 h20 v100 h-20z"/><path d="M110,200 h20 v100 h-20z"/><path d="M60,115 L40,200 h-10 L50,115z"/><path d="M140,115 L160,200 h10 L150,115z"/></g></svg>` },
                char2: { name: "Casey", svg: `<svg viewBox="0 0 200 350" xmlns="http://www.w3.org/2000/svg"><g fill="#d1a377"><ellipse cx="100" cy="35" rx="30" ry="35"/><path d="M95,70 h10 v40 h-10z"/><path d="M70,110 Q100,130 130,110 L140,200 H60z"/><path d="M70,200 h20 v100 h-20z"/><path d="M110,200 h20 v100 h-20z"/><path d="M60,115 L40,200 h-10 L50,115z"/><path d="M140,115 L160,200 h10 L150,115z"/></g></svg>` }
            },
            hair: {
                short: { name: "Short Bob", svg: `<svg viewBox="0 0 200 350"><path d="M70,0 C40,5 40,60 75,60 C90,65 110,65 125,60 C160,60 160,5 130,0z" fill="#5a3825"/></svg>` },
                long: { name: "Long Waves", svg: `<svg viewBox="0 0 200 350"><path d="M70,0 C40,5 30,80 70,120 S 130,160 170,80 C160,5 130,0 130,0z" fill="#c27f3f"/></svg>` },
                ponytail: { name: "High Pony", svg: `<svg viewBox="0 0 200 350"><g fill="#2c2c2c"><path d="M70,0 C50,5 50,55 75,55 C90,60 110,60 125,55 C150,55 150,5 130,0z"/><path d="M125,45 C140,30 160,60 140,130 C135,125 130,60 125,45z"/></g></svg>` }
            },
            shirts: {
                tee: { name: "T-Shirt", svg: `<svg viewBox="0 0 200 350"><path d="M70,112 Q100,130 130,112 L138,180 H62z" fill="#86efac"/><path d="M62,117 l-15,30 l15,5z" fill="#86efac"/><path d="M138,117 l15,30 l-15,5z" fill="#86efac"/></svg>` },
                hoodie: { name: "Hoodie", svg: `<svg viewBox="0 0 200 350"><path d="M60,110 Q100,135 140,110 L150,200 H50z" fill="#94a3b8"/><path d="M50,115 L30,180 l20,5z" fill="#94a3b8"/><path d="M150,115 L170,180 l-20,5z" fill="#94a3b8"/><path d="M80,100 C70,80 130,80 120,100" fill="#94a3b8"/></svg>` },
                tank: { name: "Tank Top", svg: `<svg viewBox="0 0 200 350"><path d="M75,110 Q100,125 125,110 L130,180 H70z" fill="#f9a8d4"/></svg>` }
            },
            bottoms: {
                shorts: { name: "Shorts", svg: `<svg viewBox="0 0 200 350"><path d="M60,180 H140 V220 H115 C105,220 105,190 95,190 S85,220 75,220 H60z" fill="#67e8f9"/></svg>` },
                skirt: { name: "Skirt", svg: `<svg viewBox="0 0 200 350"><path d="M60,180 H140 L150,240 H50z" fill="#f472b6"/></svg>`},
                pants: { name: "Pants", svg: `<svg viewBox="0 0 200 350"><path d="M60,180 H140 V200 H105 V300 H85 V200 H60z M105,200 H140 V300 H120z" fill="#a78bfa"/></svg>` }
            },
            dresses: {
                sundress: { name: "Sundress", svg: `<svg viewBox="0 0 200 350"><path d="M75,110 Q100,125 125,110 L150,260 H50z" fill="#fde047"/></svg>` },
                eveningGown: { name: "Gown", svg: `<svg viewBox="0 0 200 350"><path d="M70,110 Q100,130 130,110 L120,180 H80z M80,180 C60,180 40,300 80,300 H120 C160,300 140,180 120,180z" fill="#be185d"/></svg>`}
            },
            shoes: {
                sneakers: { name: "Sneakers", svg: `<svg viewBox="0 0 200 350"><g fill="#f1f5f9" stroke="#94a3b8" stroke-width="1"><path d="M65,300 h25 a5,5 0 0 1 5,5 v10 a5,5 0 0 1 -5,5 h-25 a5,5 0 0 1 -5,-5 v-10 a5,5 0 0 1 5,-5z"/><path d="M105,300 h25 a5,5 0 0 1 5,5 v10 a5,5 0 0 1 -5,5 h-25 a5,5 0 0 1 -5,-5 v-10 a5,5 0 0 1 5,-5z"/></g></svg>` },
                boots: { name: "Boots", svg: `<svg viewBox="0 0 200 350"><g fill="#78350f"><rect x="65" y="290" width="30" height="25" rx="3"/><rect x="105" y="290" width="30" height="25" rx="3"/></g></svg>` }
            },
            jewelry: {
                necklace: { name: "Necklace", svg: `<svg viewBox="0 0 200 350"><circle cx="100" cy="105" r="15" fill="none" stroke="#fbbf24" stroke-width="3"/><circle cx="100" cy="120" r="3" fill="#fbbf24"/></svg>` }
            }
        };

        // --- STATE ---
        let currentLook = {
            character: 'char1', hair: 'short', shirts: 'tee', bottoms: 'shorts',
            dresses: null, shoes: 'sneakers', jewelry: null,
        };
        let activeCategory = 'hair'; // Default category to show

        // --- DOM REFERENCES ---
        const characterDisplay = document.getElementById('character-display');
        const characterSelectionContainer = document.getElementById('character-selection');
        const categoryTabsContainer = document.getElementById('category-tabs');
        const itemPanel = document.getElementById('item-panel');

        // --- RENDER FUNCTIONS ---
        function renderCharacter() {
            characterDisplay.innerHTML = ''; // Clear previous look

            // 1. Render the base character first to ensure it's on the bottom layer.
            const baseCharId = currentLook.character;
            const baseCharAsset = assets.characters[baseCharId];
            if (baseCharAsset) {
                const baseLayer = document.createElement('div');
                baseLayer.id = 'layer-character';
                baseLayer.className = 'absolute inset-0 w-full h-full';
                baseLayer.innerHTML = baseCharAsset.svg;
                characterDisplay.appendChild(baseLayer);
            }

            // 2. Render clothing and accessories on top in a specific order.
            const renderOrder = ['shoes', 'bottoms', 'shirts', 'dresses', 'jewelry', 'hair'];
            renderOrder.forEach(category => {
                const itemId = currentLook[category];
                if (itemId) {
                    const asset = assets[category]?.[itemId];
                    if (asset?.svg) {
                        const layer = document.createElement('div');
                        layer.id = `layer-${category}`;
                        layer.className = 'absolute inset-0 w-full h-full';
                        layer.innerHTML = asset.svg;
                        characterDisplay.appendChild(layer);
                    }
                }
            });
        }

        function createCharacterSelectors() {
            let buttonsHTML = '';
            for (const key in assets.characters) {
                const character = assets.characters[key];
                buttonsHTML += `
                    <button class="character-selector rounded-full p-1 transition-transform transform hover:scale-110" data-char="${key}">
                        <div class="w-12 h-12 bg-pink-200 rounded-full overflow-hidden pointer-events-none">${character.svg}</div>
                    </button>
                `;
            }
            characterSelectionContainer.innerHTML = buttonsHTML;
        }

        function createCategoryTabs() {
            const categoryOrder = { hair: '✨', dresses: '👗', shirts: '👕', bottoms: '👖', shoes: '👟', jewelry: '💍' };
            let tabsHTML = '';
            for (const key in categoryOrder) {
                tabsHTML += `
                    <button class="category-tab px-4 py-2 rounded-full font-semibold text-pink-700 bg-pink-100 transition-all" data-category="${key}">
                        ${categoryOrder[key]} ${key.charAt(0).toUpperCase() + key.slice(1)}
                    </button>
                `;
            }
            categoryTabsContainer.innerHTML = tabsHTML;
        }

        function renderWardrobeItems(categoryKey) {
            const items = assets[categoryKey];
            let itemsHTML = '<div class="flex flex-wrap gap-4">';
            for (const key in items) {
                itemsHTML += `
                    <button class="wardrobe-item w-24 h-24 bg-pink-100 rounded-xl shadow-md p-2 flex items-center justify-center transition-transform transform hover:scale-105" 
                            data-category="${categoryKey}" data-item="${key}">
                        <div class="w-full h-full pointer-events-none">${items[key].svg}</div>
                    </button>
                `;
            }
            // Add a "None" button for optional categories
            if (['dresses', 'jewelry'].includes(categoryKey)) {
                 itemsHTML += `
                    <button class="wardrobe-item w-24 h-24 bg-slate-100 rounded-xl shadow-md p-2 flex items-center justify-center text-slate-500 font-bold text-lg transition-transform transform hover:scale-105" 
                            data-category="${categoryKey}" data-item="null">
                        None
                    </button>
                `;
            }
            itemsHTML += '</div>';
            itemPanel.innerHTML = itemsHTML;
            updateActiveButtons();
        }

        function updateActiveButtons() {
            // Highlight active character
            document.querySelectorAll('.character-selector').forEach(btn => {
                btn.classList.toggle('active', currentLook.character === btn.dataset.char);
            });
            // Highlight active category tab
            document.querySelectorAll('.category-tab').forEach(btn => {
                btn.classList.toggle('active', activeCategory === btn.dataset.category);
            });
            // Highlight active wardrobe item in the current panel
            document.querySelectorAll('.wardrobe-item').forEach(btn => {
                const { category, item } = btn.dataset;
                const isActive = currentLook[category] === item || (currentLook[category] === null && item === 'null');
                btn.classList.toggle('active', isActive);
            });
        }

        // --- EVENT HANDLERS ---
        function handleCategoryTabClick(event) {
            const button = event.target.closest('.category-tab');
            if (!button) return;
            activeCategory = button.dataset.category;
            renderWardrobeItems(activeCategory);
            updateActiveButtons();
        }

        function handleWardrobeClick(event) {
            const button = event.target.closest('.wardrobe-item');
            if (!button) return;

            const { category, item } = button.dataset;
            const newItem = item === 'null' ? null : item;
            currentLook[category] = newItem;

            if (category === 'dresses' && newItem !== null) {
                currentLook.shirts = null;
                currentLook.bottoms = null;
            }
            if ((category === 'shirts' || category === 'bottoms') && newItem !== null) {
                currentLook.dresses = null;
            }

            renderCharacter();
            updateActiveButtons();
        }
        
        function handleCharacterClick(event) {
             const button = event.target.closest('.character-selector');
             if (!button) return;
             currentLook.character = button.dataset.char;
             renderCharacter();
             updateActiveButtons();
        }

        // --- INITIALIZATION ---
        function init() {
            createCharacterSelectors();
            createCategoryTabs();
            renderWardrobeItems(activeCategory); // Render initial category

            // Add event listeners
            categoryTabsContainer.addEventListener('click', handleCategoryTabClick);
            itemPanel.addEventListener('click', handleWardrobeClick);
            characterSelectionContainer.addEventListener('click', handleCharacterClick);

            // Initial render
            renderCharacter();
            updateActiveButtons();
        }

        window.onload = init;
    </script>
</body>
</html>
